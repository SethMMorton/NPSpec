<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>NPSpec: Building, Installing, and Developing with NPSpec</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NPSpec
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">Solve for the spectral properties of nanoparticles easily</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Building, Installing, and Developing with NPSpec </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#configure">Configuring NPSpec for building</a></li>
<li class="level1"><a href="#build">Building NPSpec</a><ul><li class="level2"><a href="#pythonbuild">Building the Python Binding</a></li>
</ul>
</li>
<li class="level1"><a href="#install">Installing NPSpec</a><ul><li class="level2"><a href="#pyinstall">Installing the Python Binding</a></li>
</ul>
</li>
<li class="level1"><a href="#use">Using NPSpec</a><ul><li class="level2"><a href="#usec">C Binding</a></li>
<li class="level2"><a href="#usecpp">C++ Binding</a></li>
<li class="level2"><a href="#usefortran">Fortran Binding</a></li>
<li class="level2"><a href="#usepython">Python Binding</a></li>
</ul>
</li>
<li class="level1"><a href="#tests">Testing NPSpec</a></li>
<li class="level1"><a href="#pythontest">Testing the Python Binding</a></li>
<li class="level1"><a href="#clean">Cleaning Up After Yourself</a></li>
</ul>
</div>
<div class="textblock"><p>The simplest method to build and install NPSpec is the following steps: </p>
<pre class="fragment">tar -xzf npspec.tar.gz # Or unzip if npspec.zip
cd npspec
cmake .
make
make install 
</pre><p>This assumes that you are on a unix machine... substitute <code>make</code> with <code>nmake</code> if you are on Windows. You will need to have <a href="http://www.cmake.org/cmake/help/v2.8.10/cmake.html">CMake</a> installed. If you want to build the Python library, you will need <a href="https://pypi.python.org/pypi/numpy">numpy</a> installed.</p>
<p>For more details, see the sections below.</p>
<h1><a class="anchor" id="configure"></a>
Configuring NPSpec for building</h1>
<p>NPSpec uses <a href="http://www.cmake.org/cmake/help/v2.8.10/cmake.html">CMake</a> for its configuration system. CMake is a platform-independent program that creates a build system for your project that is appropriate for your operating system and setup.</p>
<p>When you run </p>
<pre class="fragment">cmake .
</pre><p>inside the top-level NPSpec directory, your build system will be generated using the defaults settings. You can customize the build using a series of options to CMake. The options are as follows:</p>
<ul>
<li><p class="startli"><code>-DSTATIC=(ON|OFF)</code></p>
<p class="startli">This will cause NPSpec to be built as a static library. This is the default. </p>
<pre class="fragment">cmake . -DSTATIC=ON
</pre></li>
</ul>
<ul>
<li><p class="startli"><code>-DSHARED=(ON|OFF)</code></p>
<p class="startli">This will cause NPSpec to be built as a shared library. </p>
<pre class="fragment">cmake . -DSHARED=ON
</pre></li>
</ul>
<ul>
<li><p class="startli"><code>-DFRAMEWORK=(ON|OFF)</code></p>
<p class="startli">This will cause NPSpec to be built as a Max OS X framework. Mac only. </p>
<pre class="fragment">cmake . -DFRAMEWORK=ON
</pre></li>
</ul>
<ul>
<li><p class="startli"><code>-DCMAKE_INSTALL_PREFIX="prefix"</code></p>
<p class="startli">This is the installation prefix to use when installing NPSpec. On unix, the default is <code>/usr/local</code>. I'm not sure what CMake chooses on Windows. You will not be able to change this at install time as is typical with GNU make; it must be set at configure time. </p>
<pre class="fragment">cmake . -DCMAKE_INSTALL_PREFIX=/usr
</pre></li>
</ul>
<ul>
<li><p class="startli"><code>-DMAKE_BUILD_TYPE=(RELEASE|DEBUG)</code></p>
<p class="startli">This will determine the compiler flags that are used for compilation. If not specified, RELEASE is assumed. </p>
<pre class="fragment">cmake . -DCMAKE_BUILD_TYPE=DEBUG
</pre></li>
</ul>
<p>If you want to switch from building (for example) a static library to a shared library, you must turn one off as you turn the other off: </p>
<pre class="fragment">cmake . -DSTATIC=OFF -DSHARED=ON
</pre><h1><a class="anchor" id="build"></a>
Building NPSpec</h1>
<p>On unix, CMake will typically create a <code>make</code> build system, and on Windows it might create <code>nmake</code>, but if you are running <code>mingw</code> or <code>cygwin</code> it will configure the build for that. All instructions are written assuming GNU make (i.e. unix); it should be trivial to substitute your command with what is described below.</p>
<p>Once you have run CMake, actually building is quite straightforward: simply type "make": </p>
<pre class="fragment">make
</pre><p>If you are unsatisfied with the colored output and want to see exactly what make is doing, you can request verbose output with </p>
<pre class="fragment">make VERBOSE=1
</pre><p>If your build tool supports it, you can request a parallel build with the <code>-j</code> option. For example, to build with 4 processors, use: </p>
<pre class="fragment">make -j4
</pre><h2><a class="anchor" id="pythonbuild"></a>
Building the Python Binding</h2>
<p>If you want to build the python binding, you will need to do so in a separate step. In the same directory, you will need to execute the command </p>
<pre class="fragment">python setup.py build
</pre><dl class="section note"><dt>Note</dt><dd>If for some reason you need to edit the SWIG wrapper, you will need to regenerate the npspec.cc file using <code>python setup.py swig</code> before you can build.</dd></dl>
<h1><a class="anchor" id="install"></a>
Installing NPSpec</h1>
<p>Installing NPSpec involves simply typing </p>
<pre class="fragment">make install
</pre><p>after building. NPSpec will be installed into the location you specified at configure time.</p>
<p>CMake does not provide an uninstall command, but after installation a file called "install_manifest.txt" is created. You can use this to uninstall NPSpec with </p>
<pre class="fragment">cat install_manifest.txt | xargs rm -rf
</pre><p>It is recommended that you save this file if you plan on uninstalling in the future.</p>
<dl class="section note"><dt>Note</dt><dd>If you are required to enter <code>sudo</code> to install the library, the install step may fail if you built the library in your home directory. This is because <code>sudo</code> does not have permissions to read your home directory. It is recommended that you build in a directory such as <code>/tmp</code> that has access by both you and <code>sudo</code>.</dd></dl>
<h2><a class="anchor" id="pyinstall"></a>
Installing the Python Binding</h2>
<p>This will build the python library for you. To install the binary you will use </p>
<pre class="fragment">python setup.py install
</pre><p><code>setup.py</code> also does not provide an uninstall command, but you can uninstall npspec by cutting and pasteing this command into the terminal </p>
<pre class="fragment">python -c "import npspec, os, shutil; shutil.rmtree(os.path.join(os.path.split(os.path.split(npspec.__file__)[0])[0]))"
</pre><h1><a class="anchor" id="use"></a>
Using NPSpec</h1>
<h2><a class="anchor" id="usec"></a>
C Binding</h2>
<p>To use the C binding, in your C code add this line at the top of your file: </p>
<pre class="fragment">#include "npspec/npspec.h"
</pre><p>If you only want to include the NPSpec constants, you only need this line: </p>
<pre class="fragment">#include "npspec/constants.h"
</pre><p>You don't need to include this with <code><a class="el" href="npspec_8h.html" title="The C-interface to the NPSpec library.">npspec/npspec.h</a></code> because it will be automatically included.</p>
<p>When you compile your program, add <code>-lNPSpec</code> to your link flags (and <code>-L/path/to/npspec</code> if it's not installed in a default library path.)</p>
<h2><a class="anchor" id="usecpp"></a>
C++ Binding</h2>
<p>To use the C++ binding, in your C++ code add this line at the top of your file: </p>
<pre class="fragment">#include "npspec/nanoparticle.hpp"
</pre><p>If you only want to include the NPSpec constants, you only need this line: </p>
<pre class="fragment">#include "npspec/constants.h"
</pre><p>You don't need to include this with <code><a class="el" href="nanoparticle_8hpp.html" title="The C++-interface to the NPSpec library.">npspec/nanoparticle.hpp</a></code> because it will be automatically included.</p>
<p>When you compile your program, add <code>-lNPSpec</code> to your link flags (and <code>-L/path/to/npspec</code> if it's not installed in a default library path.)</p>
<h2><a class="anchor" id="usefortran"></a>
Fortran Binding</h2>
<p>To use the Fortran binding, in the "use" section of your code add </p>
<pre class="fragment">use NPSpecModule
use, intrinsic :: iso_c_binding
</pre><p>although the capitalization is optional. The <code>iso_c_binding</code> module is built into modern Fortran compilers and provides tools to use C libraries in Fortran (see the <a class="el" href="npspecexamples.html#fortran">Fortran examples</a> for how this can be done.)</p>
<p>Compiling this is a little tricky. First, you will need to include <a class="el" href="_n_p_spec_module_8f90.html" title="Contains the NPSpecModule module.">NPSpecModule.f90</a> in the source list. This file is in the include directory with the C headers; you should copy it to your source directory. For the link step, not only will you have to include the NPSpec library as for C and C++ (<code>-lNPSpec</code> and <code>-L/path/to/npspec</code> if it's not installed in a default library path), but also provide the C++ standard library and runtime. This can be done by linking with your Fortran compiler (gfortran in this example) and including the C++ library: </p>
<pre class="fragment">gfortran ... -lNPSpec -lstdc++
</pre><p>OR by linking with your C++ compiler (g++ in this example) and including the Fortran library: </p>
<pre class="fragment">g++ ... -lNPSpec -lgfortran
</pre><p>You should find the appropriate library names for your compiler.</p>
<h2><a class="anchor" id="usepython"></a>
Python Binding</h2>
<p>Using the python binding is perhaps the easiest. In your python code, simply <code>import npspec</code> and you will be using the library! (Just make sure you are using the python binary that NPSpec was built against.)</p>
<h1><a class="anchor" id="tests"></a>
Testing NPSpec</h1>
<p>If you are adding functionality to NPSpec or simply want to check that you compiled it correctly, you can run the built in tests. To do this, you must use the following CMake flag at configure time </p>
<pre class="fragment">cmake . -DTESTING=ON
</pre><p>This will build the testing code. If you also want to test the Fortran bindings, you must use </p>
<pre class="fragment">cmake . -DTESTING=ON -DFORTRAN=ON
</pre><p>To perform the tests, simply type (after building) </p>
<pre class="fragment">make test
</pre><p>However, this command limits the output of the tests and only tells if they are successful or not. If you want to see the output of each test, you will need to type </p>
<pre class="fragment">ctest -V .
</pre><h1><a class="anchor" id="pythontest"></a>
Testing the Python Binding</h1>
<p>To test the python code, simply type (after building) </p>
<pre class="fragment">python setup.py test
</pre><p>You will need py.test installed to run the python tests.</p>
<h1><a class="anchor" id="clean"></a>
Cleaning Up After Yourself</h1>
<p>After building, if you want to remove all the build files you can type </p>
<pre class="fragment">make clean
</pre><p>If you want to remove ALL files that were generated after running CMake, you can type either </p>
<pre class="fragment">make distclean
</pre><p>or </p>
<pre class="fragment">cmake -P distclean.cmake</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 5 2013 20:25:44 for NPSpec by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
